extend layout

  
block content 
  .homepage
    h1 Messages

    if currentUser && currentUser.member === true
      if currentUser.admin === false
        div(class="adminModeIndicator")
        a(href="/clubhouse/admin") Become an Admin 

      each message in all_messages
        div(class="fullMemberMessageView" class="post")
          div(class="messageHeader")
            h4 #{message.user.username}
            p - #{message.edited_date}
            if currentUser.admin === true 
              a(href=message.url + "/delete") Delete
          h3 #{message.title}
          p #{message.text}
      else 
        div(class="emptyIndicator")
          h3 No Posts 
          
    else if currentUser && currentUser.member === false
      div(class="joinClubIndicator")
        a(href="/clubhouse/join") Click to join Club
    
      each message in all_messages
        div(class="memberMessageView" class="post")
          h3 #{message.title}
          p #{message.text}
          span Become a full member to see who wrote this post
      else 
        div(class="emptyIndicator")
          h3 No Posts 
         
    else 
      each message in all_messages
        div(class="visitorMessageView" class="post")
          h3 #{message.title}
          p #{message.text}
          span Become a full member to see who wrote this post
      else 
        div(class="emptyIndicator")
          h3 No Posts 
     

